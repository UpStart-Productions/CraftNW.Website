---
import { ShoppingBag } from "lucide-astro";
import ProductImageCarousel from "./ProductImageCarousel.astro";

interface Props {
  name: string;
  price: string;
  description?: string; // Optional description to show instead of price
  image: string | string[]; // Can be single image or array of images
  category: string;
  link: string;
  etsyLink?: string; // Optional Etsy link for "Buy on Etsy" button
  featured?: boolean;
  comingSoon?: boolean; // Show "Coming soon" banner
}

const { name, price, description, image, category, link, etsyLink, featured = false, comingSoon = false } = Astro.props;

// Convert single image to array for consistency
const images = Array.isArray(image) ? image : [image];
---

<article class="card overflow-hidden group">
  <!-- Product Image(s) -->
  <div class="relative overflow-hidden">
    <ProductImageCarousel images={images} alt={name} />
    {comingSoon && (
      <div class="coming-soon-banner">
        <span class="text-white text-sm font-medium">Coming soon</span>
      </div>
    )}
  </div>

  <!-- Product Info -->
  <div class="p-6">
    <h3 class="text-xl font-medium text-craft-black mb-2">
      {name}
    </h3>
    
    <p class="text-sm text-craft-brown uppercase tracking-wide mb-3">
      {category}
    </p>
    
    {description ? (
      <p class="text-craft-charcoal mb-4 leading-relaxed">
        {description}
      </p>
    ) : (
      <p class="text-2xl font-medium text-craft-black mb-4">
        {price}
      </p>
    )}

    <!-- Action Buttons -->
    <div class="flex flex-col gap-2">
      <a
        href={link}
        class="btn-primary w-full text-center inline-flex items-center justify-center gap-2"
      >
        <span>View Product</span>
      </a>
      {etsyLink && (
        <a
          href={etsyLink}
          target="_blank"
          rel="noopener noreferrer"
          class="btn-secondary w-full text-center inline-flex items-center justify-center gap-2"
        >
          <ShoppingBag class="w-4 h-4" />
          <span>Buy on Etsy</span>
        </a>
      )}
    </div>
  </div>
</article>

